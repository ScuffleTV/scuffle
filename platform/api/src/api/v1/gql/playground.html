<!--
 *  Copyright (c) 2021 GraphQL Contributors
 *  All rights reserved.
 *
 *  This source code is licensed under the license found in the
 *  LICENSE file in the root directory of this source tree.
-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>GraphiQL</title>
		<style>
			body {
				height: 100%;
				margin: 0;
				width: 100%;
				overflow: hidden;
			}

			#graphiql {
				height: 100vh;
			}
		</style>

		<script
			src="https://unpkg.com/react@17.0.2/umd/react.development.js"
			integrity="sha512-Vf2xGDzpqUOEIKO+X2rgTLWPY+65++WPwCHkX2nFMu9IcstumPsf/uKKRd5prX3wOu8Q0GBylRpsDB26R6ExOg=="
			crossorigin="anonymous"
		></script>
		<script
			src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.development.js"
			integrity="sha512-Wr9OKCTtq1anK0hq5bY3X/AvDI5EflDSAh0mE9gma+4hl+kXdTJPKZ3TwLMBcrgUeoY0s3dq9JjhCQc7vddtFg=="
			crossorigin="anonymous"
		></script>

		<link rel="stylesheet" href="https://unpkg.com/graphiql@2.4.1/graphiql.min.css" />
		<link
			rel="shortcut icon"
			href="//cdn.jsdelivr.net/npm/graphql-playground-react/build/favicon.png"
		/>
	</head>

	<body>
		<div id="graphiql">Loading...</div>
		<script
			src="https://unpkg.com/graphiql@2.4.1/graphiql.min.js"
			integrity="sha384-s0mAQjYKiYmVNpHA1gvmdi9DhSxddNMjHYpgK2eyiGwe+0f9ym+oFSL0zTxiNX9b"
			crossorigin="anonymous"
			type="application/javascript"
		></script>
		<script>
			function trimTrailingSlash(s) {
				return s.replace(/\/$/, '');
			}

			const sub_url = new URL(".", window.location.href);
			sub_url.protocol = sub_url.protocol.replace("http", "ws");
			sub_url.href = trimTrailingSlash(sub_url.href);

			const url = new URL(".", window.location.href);
			url.href = trimTrailingSlash(url.href);

			ReactDOM.render(
				React.createElement(GraphiQL, {
					fetcher: GraphiQL.createFetcher({
						url: url,
						subscriptionUrl: sub_url,
					}),
					defaultEditorToolsVisibility: true,
				}),
				document.getElementById("graphiql"),
			);
		</script>
	</body>
</html>
